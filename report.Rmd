---
title: "Understanding Trade"
author:
- familyname: Jaiswal
  othernames: Prachi
  address: Monash University
  email: "pjai0005@student.monash.edu"
  correspondingauthor: true
  qualifications:  Undergraduate
- familyname: Jiang
  othernames: Yuwei
  address: Monash Universtidy
  email: "yjia0142@student.monash.edu"
  correspondingauthor: true
  qualifications: Master
- familyname: Jawahar
  othernames: Sithalakshmi 
  address: Monash University
  email: "sjaw002@student.monash.edu"
  correspondingauthor: true
  qualifications:  Undergraduate  
department: Monash University \newline Business and Economics
organization: ETC5513 Assignment4 Team Nemo
bibliography: references.bib
biblio-style: authoryear-comp
linestretch: 1.5
output:
  bookdown::pdf_document2:
    template: monashreport2.tex
    fig_caption: yes
    fig_height: 5
    fig_width: 8
    includes:
      in_header: preamble.tex
    keep_tex: yes
    number_sections: yes
    citation_package: biblatex
    toc: false
---
```{r , include=FALSE}

 knitr::opts_chunk$set(fig.pos = "H", out.extra = "",  echo = FALSE, message = FALSE, warning = FALSE)

# Libraries
library(tidyverse)
library(readr)
library(kableExtra)
library(bookdown)
library(ggplot2)
library(ggthemes)
library(ggpubr)
library(maps)
```

```{r}
clean <- function(x, y) {
  read.csv(x) %>% 
  select(Country.or.Area: Trade..USD.) %>% 
  rename( Country = "Country.or.Area", Trade ="Trade..USD." ) %>% 
  mutate(Category = factor(y)) %>% 
  select(-Commodity)
}


iron_steel <- clean("data/UNdata_Export_20210520_091706592.csv", "iron_steel")
fruits_nuts <- clean("data/UNdata_Export_20210520_092512505.csv", "fruits_nuts")
rubber <- clean("data/UNdata_Export_20210520_092039303.csv", "rubber")
cars <- clean("data/UNdata_Export_20210519_132226922.csv","cars")
coffee <- clean("data/UNdata_Export_20210519_133347537.csv","coffee")
cotton <- clean("data/UNdata_Export_20210519_132629219.csv","cotton")
pharma <- clean("data/UNdata_Export_20210519_132341600.csv","pharma")
sugar <- clean("data/UNdata_Export_20210519_132821334.csv","sugar")
tobacco <- clean("data/UNdata_Export_20210519_131835858.csv","tobacco")
wheat <- clean("data/UNdata_Export_20210519_132931178.csv","wheat")

```

```{r}
team_nemo<- rbind(iron_steel, fruits_nuts, rubber, cars, coffee, cotton, pharma, sugar, tobacco, wheat)
assign4 <- write_csv(team_nemo, "data/team_nemo.csv")
```



\section*{Introduction}

```{r}
final <- read.csv("data/team_nemo.csv")
```



\section*{Germany}

Germany is the most powerful economy of Europe with the biggest export commodities as automobiles and medicament. Besides, we all are aware of the fact that Germany exports a large number of automobiles and their parts to different countries. But did you know that for Germany, the import of automobiles also plays an important role in its trade markets? This can be seen through the below graph:

```{r germany}
  germany <- final %>% filter(Country == "Germany")
  germany_import <- germany %>% filter(Flow == "Import")
  germany_export <- germany %>% filter(Flow == "Export")

  x<- germany%>% mutate(Trade = Trade/1000000000) %>%
    filter(Category %in% c("cars", "pharma", "wheat", "tobacco", "sugar"))%>%
    ggplot(aes(y = reorder(Category, Trade),
               x = Trade, fill = Flow)) +
    
    geom_col(position = "dodge") +
    facet_grid(~Year)+
    scale_x_continuous(labels=scales::dollar_format())+
    scale_fill_brewer(palette = "Dark2") +
    
    theme_bw()+
    xlab("Trade in Billions")+
    labs(title = "Export Oriented Goods")+
    theme(axis.title.y=element_blank())
  
  
  y<- germany %>% mutate(Trade = Trade/1000000000) %>% 
    filter(Category %in% c("rubber", "iron_steel", "fruits_nuts", "coffee", "cotton"))%>%
    ggplot(aes(y = reorder(Category, Trade),
               x = Trade, fill = Flow)) +
    
    geom_col(position = "dodge") +
    facet_grid(~Year)+
    scale_x_continuous(labels=scales::dollar_format())+
    scale_fill_brewer(palette = "Dark2")+
    
    theme_bw()+
    xlab("Trade in Billions")+
    labs(title = "Import Oriented Goods")+
    theme(axis.title.y=element_blank())
```


```{r gtrade, fig.cap = "Traded Goods in Germany", out.width="100%", fig.show="hold", out.width="100%"}

  ggarrange(x, y, legend = "top", 
            common.legend = TRUE,
            ncol =1, nrow = 2)

```
The first section of figure \@ref(fig:gtrade) shows the Export-oriented trading goods of Germany where one can see that the Automobiles sector indeed has more Export value than any other sector taken into consideration followed by Pharmaceuticals and Tobacco goods. The export values of these commodities have seen quite a significant rise in their export values. Besides this, Wheat had a slightly negligible import in the year 2016, however, its value saw an increase over the period. 


Talking about import, the next section of the same figure (figure \@ref(fig:gtrade))  displays a brief insight on the Import oriented trading commodities in Germany. Rubber out-stands every import dominant goods are taken into the study with almost about similar export value. Similarly, for iron and steel, we notice a minor difference in their trade values. Next in the line is Coffee with the 2nd highest Import value and sort of remains parallel over the span. Fruits & Nuts and Coffee are atypical commodity with their Import value soaring much higher than their Exports.



```{r germanytrend}

  itrade_val <- germany_import %>% rename("Import_Value"= Trade, 
                                          "Import"= Flow)
  
  etrade_val <- germany_export %>% rename("Export_Value"= Trade, 
                                          "Export"= Flow)

  trade <- itrade_val %>% 
    left_join(etrade_val, by=c("Year"="Year", 
                              "Country"= "Country", 
                              "Category"= "Category")) 

  mean_tarde<- trade %>% 
    group_by(Year)%>%
    summarise(Ex_Value= mean(Export_Value),
              Im_Value=mean(Import_Value)) %>%
    mutate(Mean_Trade = Ex_Value + Im_Value) %>%
    select(Year, Mean_Trade)


 knitr::kable(mean_tarde, caption = "Trend of Trade in Germany in USD for 3 years") %>%
        kable_styling (latex_options = c("hover", "hold_position")) 

```

Table \@ref(tab:germanytrend) shows the mean value by Year of all the commodities traded in Germany. The table displays that the Trade value (Export value and Import Value) for 2016 is about 700 million USD. This increases by about 100 million more in the year 2017. And for 2018, it is nearly about 900 million USD. Hence the trade over these years has seen quite a bit increase. 


```{r germanycomo}
  
  trend<- trade%>%
    group_by(Category)%>%
    summarise(Ex_Value= mean(Export_Value),
              Im_Value= mean(Import_Value)) %>%
    mutate(Trend = Ex_Value - Im_Value) %>%
    arrange(-Trend)

  knitr::kable(trend, caption = "Traded Comodities in Germany") %>%
         kable_styling (latex_options = c("striped", "hold_position"))%>%
         kable_classic()

```

From table \@ref(tab:germanycomo) can be observed, net trading can be observed in the table. Where there are more exports (positive values) than Imports (negative values) making this a largely export-oriented country. Automobiles and Medicament contributing the most while Coffee and Iron & Steel contributing very less. Fruits and Nuts rank the lowest as it's imported in much higher value than what it is being exported.
From the table, cars are exported at the highest rate of 1.89 Billion and cotton is imported the most.


\section*{China}

\section*{United States of America}

\section*{Conclusion}



